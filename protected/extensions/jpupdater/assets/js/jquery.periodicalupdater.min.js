(function($){$.PeriodicalUpdater=function(options,callback){settings=jQuery.extend({url:'',method:'get',sendData:'',minTimeout:1000,maxTimeout:8000,multiplier:2,type:'text'},options);f=settings.method=='post'||settings.method=='POST'?$.post:$.get;settings.multiplier=settings.multiplier<1?1:settings.multiplier;var prevContent;var timerInterval=settings.minTimeout;getdata();function getdata(){f(settings.url,settings.sendData,function(d){if(prevContent!=d){prevContent=d;if(callback){callback(d)}PeriodicalTimer=setTimeout(getdata,settings.minTimeout)}else{if(timerInterval<settings.maxTimeout){timerInterval=timerInterval*settings.multiplier}if(timerInterval>settings.maxTimeout){timerInterval=settings.maxTimeout}PeriodicalTimer=setTimeout(getdata,timerInterval)}},settings.type)}}})(jQuery);